name: Bot Tu Dong (News)

on:
  # 1. Tự động chạy 3 tiếng 1 lần (phút thứ 8)
  schedule:
    - cron: '8 */3 * * *'
  
  # 2. Cho phép bấm nút chạy thử thủ công (TEST NGAY)
  workflow_dispatch:

jobs:
  run-bot:
    runs-on: ubuntu-latest

    steps:
      - name: 1. Tải code về
        uses: actions/checkout@v3

      - name: 2. Cài Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: 3. Cài thư viện
        run: pip install tweepy google-generativeai python-dotenv

      - name: 4. Chạy Bot
        env:
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}

          X_API_KEY_1: ${{ secrets.X_API_KEY_1 }}
          X_API_SECRET_1: ${{ secrets.X_API_SECRET_1 }}
          X_ACCESS_TOKEN_1: ${{ secrets.X_ACCESS_TOKEN_1 }}
          X_ACCESS_TOKEN_SECRET_1: ${{ secrets.X_ACCESS_TOKEN_SECRET_1 }}

          X_API_KEY_2: ${{ secrets.X_API_KEY_2 }}
          X_API_SECRET_2: ${{ secrets.X_API_SECRET_2 }}
          X_ACCESS_TOKEN_2: ${{ secrets.X_ACCESS_TOKEN_2 }}
          X_ACCESS_TOKEN_SECRET_2: ${{ secrets.X_ACCESS_TOKEN_SECRET_2 }}
        run: python main.py
